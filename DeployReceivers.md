# `DeployOnPush` and `DeployOnMerge`

## These are the most practical uses for this package

These two **Event Receivers** are the main reason I started this whole project.  I just wanted to auto-deploy some static sites when pushing or merging to `master` on some private *GitLab* repositories.  I did not find anything in PHP that I liked (although I tend to not look very hard), so I just wrote one up.  Then I thought, hey, why not make this available for others.  There's got to be someone else out there that could use something and quick and dirty like this.

`DeployOnPush` is very simple.  You instantiate it with a path to a repo.  You can optionally supply a branch, remote, and an array of commands to run post-deployment.  The default branch is `master`, and the default remote is `origin`.  When an *GitLab* webhook comes in with a `push` event for that branch, this **Event Receiver** will queue up a deploy command.  When the **Command** gets worked, the script will `cd` to the provided path and run `git pull {remote} {branch}`.  If you supply any post-deployment commands, they will then be run in the order you specified.  Things like `composer update`, `gulp`, or other tools that need to run might come in handy here.

`DeployOnMerge` is basically identical, but it only reacts to `merge_request` events where the supplied branch is the target of the merge.  Since both of these **Event Receivers** use the [`EventReceiverFluentSetter`](./src/EventReceiverFluentSetter.php) trait they can set to filter down to a specific set of events, like a merge from a specific branch, or events initiated by a specific user only.  See the [**Event Receivers** help page](./EventReceivers.php) for more information.